<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho - Design em Campo</title>
    <link href="../css/carrinho.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div class="App">
        <!-- Header -->
        <header class="header-section">
            <div class="header-left">
                <img src="../img/logo.png" alt="Logo">
                <a href="../html/index.html" class="header-button">Página Inicial</a>
            </div>
            <div class="header-center">
                <h1>Seu Carrinho</h1>
            </div>
            <div class="header-right">
                <a href="../html/promo.html" class="header-button">Voltar às Promoções</a>
            </div>
        </header>

        <!-- Seção do Carrinho -->
        <div class="cart-container">
            <h2 class="cart-title">Produtos no Carrinho</h2>
            <div id="cart-items">
                <!-- Os itens serão inseridos aqui dinamicamente -->
            </div>
            <div class="cart-summary">
                <h3 id="cart-total">Total: R$ 0,00</h3>
                <button id="checkout-btn">Finalizar Compra</button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer-section">
            <p>Obrigado por personalizar com a Design em Campo!</p>
        </footer>
    </div>

    <script>
        // Recuperar os itens do LocalStorage
        const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');

        // Função para renderizar os itens do carrinho
        function renderCartItems() {
            if (cartItems.length === 0) {
                cartItemsContainer.innerHTML = '<p>Seu carrinho está vazio.</p>';
                cartTotal.textContent = 'Total: R$ 0,00';
                return;
            }

            let total = 0;

            cartItemsContainer.innerHTML = cartItems
                .map(item => {
                    total += parseFloat(item.price);
                    return `
                        <div class="cart-item">
                            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                            <div class="cart-item-details">
                                <h4>${item.name}</h4>
                                <p>Preço: R$ ${parseFloat(item.price).toFixed(2)}</p>
                            </div>
                            <button class="remove-btn" data-id="${item.id}">Remover</button>
                        </div>
                    `;
                })
                .join('');

            // Atualizar o total do carrinho
            cartTotal.textContent = `Total: R$ ${total.toFixed(2)}`;
        }

        // Função para remover um item do carrinho
        function removeItem(event) {
            const idToRemove = event.target.getAttribute('data-id');
            const updatedCart = cartItems.filter(item => item.id !== idToRemove);
            localStorage.setItem('cart', JSON.stringify(updatedCart));
            location.reload(); // Recarregar a página para atualizar o carrinho
        }

        // Adicionar evento de remoção aos botões de "Remover"
        function addRemoveEventListeners() {
            const removeButtons = document.querySelectorAll('.remove-btn');
            removeButtons.forEach(button =>
                button.addEventListener('click', removeItem)
            );
        }

        // Inicialização da página
        renderCartItems();
        addRemoveEventListeners();
    </script>
</body>

</html>
